<html><head><style>body {
   color: black;
}
</style></head><body><h1 id="-div-align-center-whatsapp-web-api-div-"><div align='center'>WhatsApp Web API</div></h1>
<div align='center'>

<img src="https://raw.githubusercontent.com/ClayzaAubert/library/main/media/baileys-rise.png" alt="WhatsApp API">

</div>

<p>Baileys is a WebSockets-based TypeScript library for interacting with the WhatsApp Web API.</p>
<h1 id="disclaimer">Disclaimer</h1>
<p>This project is not affiliated, associated, authorized, endorsed by, or in any way officially connected with WhatsApp or any of its subsidiaries or its affiliates.
The official WhatsApp website can be found at whatsapp.com. &quot;WhatsApp&quot; as well as related names, marks, emblems and images are registered trademarks of their respective owners.</p>
<p>The maintainers of Baileys do not in any way condone the use of this application in practices that violate the Terms of Service of WhatsApp. The maintainers of this application call upon the personal responsibility of its users to use this application in a fair way, as it is intended to be used.
Use at your own discretion. Do not spam people with this. We discourage any stalkerware, bulk or automated messaging usage.</p>
<h2 id="example">Example</h2>
<p>Here is an example you can use: <a href="Example/example.ts">example.ts</a> or here is a tutorial for running the Baileys WhatsApp API code</p>
<ol>
<li><code>cd path/to/Baileys</code></li>
<li><code>npm install</code></li>
<li><code>node example.js</code></li>
</ol>
<h2 id="install">Install</h2>
<p>Use the stable version:</p>
<pre><code class="lang-bash"><span class="hljs-selector-tag">npm</span> <span class="hljs-selector-tag">install</span> @<span class="hljs-keyword">clayzaaubert</span>/<span class="hljs-keyword">baileys</span>-<span class="hljs-keyword">rise</span>
</code></pre>
<p>Use the edge version (no guarantee of stability, but latest fixes + features)</p>
<pre><code class="lang-bash"><span class="hljs-selector-tag">yarn</span> <span class="hljs-selector-tag">add</span> @<span class="hljs-keyword">clayzaaubert</span>/<span class="hljs-keyword">baileys</span>-<span class="hljs-keyword">rise</span>@<span class="hljs-keyword">latest</span>
</code></pre>
<p>Then import your code using:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> { <span class="hljs-keyword">default</span>: makeWASocket } = require(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>)
</code></pre>
<h1 id="index">Index</h1>
<ul>
<li><a href="#connecting-account">Connecting Account</a><ul>
<li><a href="#starting-socket-with-qr-code">Connect with QR-CODE</a></li>
<li><a href="#starting-socket-with-pairing-code">Connect with Pairing Code</a></li>
<li><a href="#receive-full-history">Receive Full History</a></li>
</ul>
</li>
<li><p><a href="#important-notes-about-socket-config">Important Notes About Socket Config</a></p>
<ul>
<li><a href="#caching-group-metadata-recommended">Caching Group Metadata (Recommended)</a></li>
<li><a href="#improve-retry-system--decrypt-poll-votes">Improve Retry System &amp; Decrypt Poll Votes</a></li>
<li><a href="#receive-notifications-in-whatsapp-app">Receive Notifications in Whatsapp App</a></li>
</ul>
</li>
<li><p><a href="#saving--restoring-sessions">Save Auth Info</a></p>
</li>
<li><a href="#handling-events">Handling Events</a><ul>
<li><a href="#example-to-start">Example to Start</a></li>
<li><a href="#decrypt-poll-votes">Decrypt Poll Votes</a></li>
<li><a href="#summary-of-events-on-first-connection">Summary of Events on First Connection</a></li>
</ul>
</li>
<li><a href="#implementing-a-data-store">Implementing a Data Store</a></li>
<li><a href="#whatsapp-ids-explain">Whatsapp IDs Explain</a></li>
<li><a href="#utility-functions">Utility Functions</a></li>
<li><a href="#sending-messages">Sending Messages</a><ul>
<li><a href="#non-media-messages">Non-Media Messages</a><ul>
<li><a href="#buttons-message">Buttons Message</a></li>
<li><a href="#buttons-flow">Buttons Flow</a></li>
<li><a href="#interactive-message">Interactive Message</a></li>
<li><a href="#text-message">Text Message</a></li>
<li><a href="#quote-message-works-with-all-types">Quote Message</a></li>
<li><a href="#mention-user-works-with-most-types">Mention User</a></li>
<li><a href="#mention-status">Mention Status</a></li>
<li><a href="#result-poll-from-newsletter">Result Poll From Newsletter</a></li>
<li><a href="#send-album-message">SendAlbumMessage</a></li>
<li><a href="#interactive-response">Interactive Response</a></li>
<li><a href="#request-payment">Request Payment</a></li>
<li><a href="#event-message">Event Message</a></li>
<li><a href="#interactive">Interactive</a></li>
<li><a href="#forward-messages">Forward Messages</a></li>
<li><a href="#location-message">Location Message</a></li>
<li><a href="#contact-message">Contact Message</a></li>
<li><a href="#reaction-message">Reaction Message</a></li>
<li><a href="#pin-message">Pin Message</a></li>
<li><a href="#poll-message">Poll Message</a></li>
</ul>
</li>
<li><a href="#sending-messages-with-link-previews">Sending with Link Preview</a></li>
<li><a href="#media-messages">Media Messages</a><ul>
<li><a href="#gif-message">Gif Message</a></li>
<li><a href="#video-message">Video Message</a></li>
<li><a href="#audio-message">Audio Message</a></li>
<li><a href="#image-message">Image Message</a></li>
<li><a href="#view-once-message">ViewOnce Message</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#modify-messages">Modify Messages</a><ul>
<li><a href="#deleting-messages-for-everyone">Delete Messages (for everyone)</a></li>
<li><a href="#editing-messages">Edit Messages</a></li>
</ul>
</li>
<li><a href="#manipulating-media-messages">Manipulating Media Messages</a><ul>
<li><a href="#thumbnail-in-media-messages">Thumbnail in Media Messages</a></li>
<li><a href="#downloading-media-messages">Downloading Media Messages</a></li>
<li><a href="#re-upload-media-message-to-whatsapp">Re-upload Media Message to Whatsapp</a></li>
</ul>
</li>
<li><a href="#reject-call">Reject Call</a></li>
<li><a href="#send-states-in-chat">Send States in Chat</a><ul>
<li><a href="#reading-messages">Reading Messages</a></li>
<li><a href="#update-presence">Update Presence</a></li>
</ul>
</li>
<li><a href="#modifying-chats">Modifying Chats</a><ul>
<li><a href="#archive-a-chat">Archive a Chat</a></li>
<li><a href="#muteunmute-a-chat">Mute/Unmute a Chat</a></li>
<li><a href="#mark-a-chat-readunread">Mark a Chat Read/Unread</a></li>
<li><a href="#delete-a-message-for-me">Delete a Message for Me</a></li>
<li><a href="#delete-a-chat">Delete a Chat</a></li>
<li><a href="#starunstar-a-message">Star/Unstar a Message</a></li>
<li><a href="#disappearing-messages">Disappearing Messages</a></li>
</ul>
</li>
<li><a href="#user-querys">User Querys</a><ul>
<li><a href="#check-if-id-exists-in-whatsapp">Check If ID Exists in Whatsapp</a></li>
<li><a href="#query-chat-history-groups-too">Query Chat History (groups too)</a></li>
<li><a href="#fetch-status">Fetch Status</a></li>
<li><a href="#fetch-profile-picture-groups-too">Fetch Profile Picture (groups too)</a></li>
<li><a href="#fetch-bussines-profile-such-as-description-or-category">Fetch Bussines Profile (such as description or category)</a></li>
<li><a href="#fetch-someones-presence-if-theyre-typing-or-online">Fetch Someone&#39;s Presence (if they&#39;re typing or online)</a></li>
</ul>
</li>
<li><a href="#change-profile">Change Profile</a><ul>
<li><a href="#change-profile-status">Change Profile Status</a></li>
<li><a href="#change-profile-name">Change Profile Name</a></li>
<li><a href="#change-display-picture-groups-too">Change Display Picture (groups too)</a></li>
<li><a href="#remove-display-picture-groups-too">Remove display picture (groups too)</a></li>
</ul>
</li>
<li><a href="#groups">Groups</a><ul>
<li><a href="#create-a-group">Create a Group</a></li>
<li><a href="#addremove-or-demotepromote">Add/Remove or Demote/Promote</a></li>
<li><a href="#change-subject-name">Change Subject (name)</a></li>
<li><a href="#change-description">Change Description</a></li>
<li><a href="#change-settings">Change Settings</a></li>
<li><a href="#leave-a-group">Leave a Group</a></li>
<li><a href="#get-invite-code">Get Invite Code</a></li>
<li><a href="#revoke-invite-code">Revoke Invite Code</a></li>
<li><a href="#join-using-invitation-code">Join Using Invitation Code</a></li>
<li><a href="#get-group-info-by-invite-code">Get Group Info by Invite Code</a></li>
<li><a href="#query-metadata-participants-name-description">Query Metadata (participants, name, description...)</a></li>
<li><a href="#join-using-groupinvitemessage">Join using groupInviteMessage</a></li>
<li><a href="#get-request-join-list">Get Request Join List</a></li>
<li><a href="#approvereject-request-join">Approve/Reject Request Join</a></li>
<li><a href="#get-all-participating-groups-metadata">Get All Participating Groups Metadata</a></li>
<li><a href="#toggle-ephemeral">Toggle Ephemeral</a></li>
<li><a href="#change-add-mode">Change Add Mode</a></li>
</ul>
</li>
<li><a href="#privacy">Privacy</a><ul>
<li><a href="#blockunblock-user">Block/Unblock User</a></li>
<li><a href="#get-privacy-settings">Get Privacy Settings</a></li>
<li><a href="#get-blocklist">Get BlockList</a></li>
<li><a href="#update-lastseen-privacy">Update LastSeen Privacy</a></li>
<li><a href="#update-online-privacy">Update Online Privacy</a></li>
<li><a href="#update-profile-picture-privacy">Update Profile Picture Privacy</a></li>
<li><a href="#update-status-privacy">Update Status Privacy</a></li>
<li><a href="#update-read-receipts-privacy">Update Read Receipts Privacy</a></li>
<li><a href="#update-groups-add-privacy">Update Groups Add Privacy</a></li>
<li><a href="#update-default-disappearing-mode">Update Default Disappearing Mode</a></li>
</ul>
</li>
<li><a href="#broadcast-lists--stories">Broadcast Lists &amp; Stories</a><ul>
<li><a href="#send-broadcast--stories">Send Broadcast &amp; Stories</a></li>
<li><a href="#query-a-broadcast-lists-recipients--name">Query a Broadcast List&#39;s Recipients &amp; Name</a></li>
</ul>
</li>
<li><a href="#writing-custom-functionality">Writing Custom Functionality</a><ul>
<li><a href="#enabling-debug-level-in-baileys-logs">Enabling Debug Level in Baileys Logs</a></li>
<li><a href="#how-whatsapp-communicate-with-us">How Whatsapp Communicate With Us</a></li>
<li><a href="#register-a-callback-for-websocket-events">Register a Callback for Websocket Events</a></li>
</ul>
</li>
</ul>
<h2 id="connecting-account">Connecting Account</h2>
<p>WhatsApp provides a multi-device API that allows Baileys to be authenticated as a second WhatsApp client by scanning a <strong>QR code</strong> or <strong>Pairing Code</strong> with WhatsApp on your phone.</p>
<h3 id="starting-socket-with-qr-code-">Starting socket with <strong>QR-CODE</strong></h3>
<blockquote>
<p>[!TIP]
You can customize browser name if you connect with <strong>QR-CODE</strong>, with <code>Browser</code> constant, we have some browsers config, <strong>see <a href="https://baileys.whiskeysockets.io/types/BrowsersMap.html">here</a></strong></p>
</blockquote>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> { <span class="hljs-keyword">default</span>: makeWASocket } = require(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>)


<span class="hljs-keyword">const</span> sock = makeWASocket({
    <span class="hljs-comment">// can provide additional config here</span>
    browser: Browsers.ubuntu('My App'),
    printQRInTerminal: <span class="hljs-keyword">true</span>
})
</code></pre>
<p>If the connection is successful, you will see a QR code printed on your terminal screen, scan it with WhatsApp on your phone and you&#39;ll be logged in!</p>
<h3 id="starting-socket-with-pairing-code-">Starting socket with <strong>Pairing Code</strong></h3>
<blockquote>
<p>[!IMPORTANT]
Pairing Code isn&#39;t Mobile API, it&#39;s a method to connect Whatsapp Web without QR-CODE, you can connect only with one device, see <a href="https://faq.whatsapp.com/1324084875126592/?cms_platform=web">here</a></p>
</blockquote>
<p>The phone number can&#39;t have <code>+</code> or <code>()</code> or <code>-</code>, only numbers, you must provide country code</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> { <span class="hljs-keyword">default</span>: makeWASocket } = require(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>)

<span class="hljs-keyword">const</span> sock = makeWASocket({
    // can provide additional config here
    printQRInTerminal: <span class="hljs-literal">false</span> //need <span class="hljs-keyword">to</span> be <span class="hljs-literal">false</span>
})

- Normal Pairing
<span class="hljs-keyword">if</span> (!sock.authState.creds.registered) {
    <span class="hljs-keyword">const</span> <span class="hljs-built_in">number</span> = <span class="hljs-string">'XXXXXXXXXXX'</span>
    <span class="hljs-keyword">const</span> code = await sock.requestPairingCode(<span class="hljs-built_in">number</span>)
    console.<span class="hljs-built_in">log</span>(code)
}

- Costum Pairing
<span class="hljs-keyword">if</span> (!sock.authState.creds.registered) {
    <span class="hljs-keyword">const</span> pair = <span class="hljs-string">"12345678"</span> // only <span class="hljs-number">8</span> digit numbers <span class="hljs-literal">or</span> letters (no more <span class="hljs-literal">or</span> less)
    <span class="hljs-keyword">const</span> <span class="hljs-built_in">number</span> = <span class="hljs-string">'XXXXXXXXXXX'</span>
    <span class="hljs-keyword">const</span> code = await sock.requestPairingCode(<span class="hljs-built_in">number</span>, pair)
    console.<span class="hljs-built_in">log</span>(code)
}
</code></pre>
<h3 id="receive-full-history">Receive Full History</h3>
<ol>
<li>Set <code>syncFullHistory</code> as <code>true</code></li>
<li>Baileys, by default, use chrome browser config<ul>
<li>If you&#39;d like to emulate a desktop connection (and receive more message history), this browser setting to your Socket config:</li>
</ul>
</li>
</ol>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> sock = makeWASocket({
    ...otherOpts,
    <span class="hljs-comment">// can use Windows, Ubuntu here too</span>
    browser: Browsers.macOS(<span class="hljs-string">'Desktop'</span>),
    syncFullHistory: <span class="hljs-literal">true</span>
})
</code></pre>
<h2 id="important-notes-about-socket-config">Important Notes About Socket Config</h2>
<h3 id="caching-group-metadata-recommended-">Caching Group Metadata (Recommended)</h3>
<ul>
<li><p>If you use baileys for groups, we recommend you to set <code>cachedGroupMetadata</code> in socket config, you need to implement a cache like this:</p>
<pre><code class="lang-javascript">  <span class="hljs-keyword">const</span> groupCache = <span class="hljs-keyword">new</span> NodeCache({stdTTL: <span class="hljs-number">5</span> * <span class="hljs-number">60</span>, useClones: <span class="hljs-literal">false</span>})

  <span class="hljs-keyword">const</span> sock = makeWASocket({
      cachedGroupMetadata: <span class="hljs-keyword">async</span> (jid) =&gt; groupCache.<span class="hljs-keyword">get</span>(jid)
  })

  sock.ev.<span class="hljs-keyword">on</span>(<span class="hljs-string">'groups.update'</span>, <span class="hljs-keyword">async</span> ([<span class="hljs-keyword">event</span>]) =&gt; {
      <span class="hljs-keyword">const</span> metadata = <span class="hljs-keyword">await</span> sock.groupMetadata(<span class="hljs-keyword">event</span>.id)
      groupCache.<span class="hljs-keyword">set</span>(<span class="hljs-keyword">event</span>.id, metadata)
  })

  sock.ev.<span class="hljs-keyword">on</span>(<span class="hljs-string">'group-participants.update'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-keyword">event</span>) =&gt; {
      <span class="hljs-keyword">const</span> metadata = <span class="hljs-keyword">await</span> sock.groupMetadata(<span class="hljs-keyword">event</span>.id)
      groupCache.<span class="hljs-keyword">set</span>(<span class="hljs-keyword">event</span>.id, metadata)
  })
</code></pre>
</li>
</ul>
<h3 id="improve-retry-system-decrypt-poll-votes">Improve Retry System &amp; Decrypt Poll Votes</h3>
<ul>
<li>If you want to improve sending message, retrying when error occurs and decrypt poll votes, you need to have a store and set <code>getMessage</code> config in socket like this:<pre><code class="lang-javascript">  const sock = makeWASocket({
      getMessage: async (<span class="hljs-name">key</span>) =&gt; await getMessageFromStore(<span class="hljs-name">key</span>)
  })
</code></pre>
</li>
</ul>
<h3 id="receive-notifications-in-whatsapp-app">Receive Notifications in Whatsapp App</h3>
<ul>
<li>If you want to receive notifications in whatsapp app, set <code>markOnlineOnConnect</code> to <code>false</code><pre><code class="lang-javascript">  <span class="hljs-keyword">const</span> sock = makeWASocket({
      markOnlineOnConnect: <span class="hljs-literal">false</span>
  })
</code></pre>
<h2 id="saving-restoring-sessions">Saving &amp; Restoring Sessions</h2>
</li>
</ul>
<p>You obviously don&#39;t want to keep scanning the QR code every time you want to connect.</p>
<p>So, you can load the credentials to log back in:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> makeWASocket = require(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>).<span class="hljs-keyword">default</span>;
<span class="hljs-keyword">const</span> { useMultiFileAuthState } = require(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>);

<span class="hljs-keyword">const</span> { state, saveCreds } = <span class="hljs-keyword">await</span> useMultiFileAuthState(<span class="hljs-string">'auth_info_baileys'</span>)

<span class="hljs-comment">// will use the given state to connect</span>
<span class="hljs-comment">// so if valid credentials are available -- it'll connect without QR</span>
<span class="hljs-keyword">const</span> sock = makeWASocket({ auth: state })

<span class="hljs-comment">// this will be called as soon as the credentials are updated</span>
sock.ev.<span class="hljs-keyword">on</span>(<span class="hljs-string">'creds.update'</span>, saveCreds)
</code></pre>
<blockquote>
<p>[!IMPORTANT]
<code>useMultiFileAuthState</code> is a utility function to help save the auth state in a single folder, this function serves as a good guide to help write auth &amp; key states for SQL/no-SQL databases, which I would recommend in any production grade system.</p>
<p>[!NOTE]
When a message is received/sent, due to signal sessions needing updating, the auth keys (<code>authState.keys</code>) will update. Whenever that happens, you must save the updated keys (<code>authState.keys.set()</code> is called). Not doing so will prevent your messages from reaching the recipient &amp; cause other unexpected consequences. The <code>useMultiFileAuthState</code> function automatically takes care of that, but for any other serious implementation -- you will need to be very careful with the key state management.</p>
</blockquote>
<h2 id="handling-events">Handling Events</h2>
<ul>
<li>Baileys uses the EventEmitter syntax for events.
They&#39;re all nicely typed up, so you shouldn&#39;t have any issues with an Intellisense editor like VS Code.</li>
</ul>
<blockquote>
<p>[!IMPORTANT]
<strong>The events are <a href="https://baileys.whiskeysockets.io/types/BaileysEventMap.html">these</a></strong>, it&#39;s important you see all events</p>
</blockquote>
<p>You can listen to these events like this:</p>
<pre><code class="lang-javascript">const sock = makeWASocket()
sock.ev.<span class="hljs-literal">on</span>(<span class="hljs-string">'messages.upsert'</span>, <span class="hljs-function"><span class="hljs-params">({ messages })</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'got messages'</span>, messages)
})
</code></pre>
<h3 id="example-to-start">Example to Start</h3>
<blockquote>
<p>[!NOTE]
This example includes basic auth storage too</p>
</blockquote>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> makeWASocket = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>).default;
<span class="hljs-keyword">const</span> { DisconnectReason, useMultiFileAuthState } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>);
<span class="hljs-keyword">const</span> Boom = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@hapi/boom'</span>);

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">connectToWhatsApp</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> { state, saveCreds } = <span class="hljs-keyword">await</span> useMultiFileAuthState(<span class="hljs-string">'auth_info_baileys'</span>)
    <span class="hljs-keyword">const</span> sock = makeWASocket({
        <span class="hljs-comment">// can provide additional config here</span>
        auth: state,
        <span class="hljs-attr">printQRInTerminal</span>: <span class="hljs-literal">true</span>
    })
    sock.ev.on(<span class="hljs-string">'connection.update'</span>, (update) =&gt; {
        <span class="hljs-keyword">const</span> { connection, lastDisconnect } = update
        <span class="hljs-keyword">if</span>(connection === <span class="hljs-string">'close'</span>) {
            <span class="hljs-keyword">const</span> shouldReconnect = (lastDisconnect.error <span class="hljs-keyword">as</span> Boom)?.output?.statusCode !== DisconnectReason.loggedOut
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'connection closed due to '</span>, lastDisconnect.error, <span class="hljs-string">', reconnecting '</span>, shouldReconnect)
            <span class="hljs-comment">// reconnect if not logged out</span>
            <span class="hljs-keyword">if</span>(shouldReconnect) {
                connectToWhatsApp()
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(connection === <span class="hljs-string">'open'</span>) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'opened connection'</span>)
        }
    })
    sock.ev.on(<span class="hljs-string">'messages.upsert'</span>, event =&gt; {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> m <span class="hljs-keyword">of</span> event.messages) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">JSON</span>.stringify(m, <span class="hljs-literal">undefined</span>, <span class="hljs-number">2</span>))

            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'replying to'</span>, m.key.remoteJid)
            <span class="hljs-keyword">await</span> sock.sendMessage(m.key.remoteJid!, { <span class="hljs-attr">text</span>: <span class="hljs-string">'Hello Word'</span> })
        }
    })

    <span class="hljs-comment">// to storage creds (session info) when it updates</span>
    sock.ev.on(<span class="hljs-string">'creds.update'</span>, saveCreds)
}
<span class="hljs-comment">// run in main file</span>
connectToWhatsApp()
</code></pre>
<blockquote>
<p>[!IMPORTANT]
In <code>messages.upsert</code> it&#39;s recommended to use a loop like <code>for (const message of event.messages)</code> to handle all messages in array</p>
</blockquote>
<h3 id="decrypt-poll-votes">Decrypt Poll Votes</h3>
<ul>
<li>By default poll votes are encrypted and handled in <code>messages.update</code></li>
<li><p>That&#39;s a simple example</p>
<pre><code class="lang-javascript">sock.ev.<span class="hljs-keyword">on</span>('messages.<span class="hljs-keyword">update</span>', event =&gt; {
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> { key, <span class="hljs-keyword">update</span> } of event) {
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">update</span>.pollUpdates) {
          <span class="hljs-keyword">const</span> pollCreation = await getMessage(key)
          <span class="hljs-keyword">if</span>(pollCreation) {
              console.<span class="hljs-built_in">log</span>(
                  'got poll <span class="hljs-keyword">update</span>, aggregation: ',
                  getAggregateVotesInPollMessage({
                      message: pollCreation,
                      pollUpdates: <span class="hljs-keyword">update</span>.pollUpdates,
                  })
              )
          }
      }
  }
})
</code></pre>
</li>
<li><p><code>getMessage</code> is a <a href="#implementing-a-data-store">store</a> implementation (in your end)</p>
</li>
</ul>
<h3 id="summary-of-events-on-first-connection">Summary of Events on First Connection</h3>
<ol>
<li>When you connect first time, <code>connection.update</code> will be fired requesting you to restart sock</li>
<li>Then, history messages will be received in <code>messaging.history-set</code></li>
</ol>
<h2 id="implementing-a-data-store">Implementing a Data Store</h2>
<ul>
<li>Baileys does not come with a defacto storage for chats, contacts, or messages. However, a simple in-memory implementation has been provided. The store listens for chat updates, new messages, message updates, etc., to always have an up-to-date version of the data.</li>
</ul>
<blockquote>
<p>[!IMPORTANT]
I highly recommend building your own data store, as storing someone&#39;s entire chat history in memory is a terrible waste of RAM.</p>
</blockquote>
<p>It can be used as follows:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> makeWASocket = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>).default;
<span class="hljs-keyword">const</span> { makeInMemoryStore } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>);
<span class="hljs-comment">// the store maintains the data of the WA connection in memory</span>
<span class="hljs-comment">// can be written out to a file &amp; read from it</span>
<span class="hljs-keyword">const</span> store = makeInMemoryStore({ })
<span class="hljs-comment">// can be read from a file</span>
store.readFromFile(<span class="hljs-string">'./baileys_store.json'</span>)
<span class="hljs-comment">// saves the state to a file every 10s</span>
setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    store.writeToFile(<span class="hljs-string">'./baileys_store.json'</span>)
}, <span class="hljs-number">10</span>_000)

<span class="hljs-keyword">const</span> sock = makeWASocket({ })
<span class="hljs-comment">// will listen from this socket</span>
<span class="hljs-comment">// the store can listen from a new socket once the current socket outlives its lifetime</span>
store.bind(sock.ev)

sock.ev.on(<span class="hljs-string">'chats.upsert'</span>, () =&gt; {
    <span class="hljs-comment">// can use 'store.chats' however you want, even after the socket dies out</span>
    <span class="hljs-comment">// 'chats' =&gt; a KeyedDB instance</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'got chats'</span>, store.chats.all())
})

sock.ev.on(<span class="hljs-string">'contacts.upsert'</span>, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'got contacts'</span>, <span class="hljs-built_in">Object</span>.values(store.contacts))
})
</code></pre>
<p>The store also provides some simple functions such as <code>loadMessages</code> that utilize the store to speed up data retrieval.</p>
<h2 id="whatsapp-ids-explain">Whatsapp IDs Explain</h2>
<ul>
<li><code>id</code> is the WhatsApp ID, called <code>jid</code> too, of the person or group you&#39;re sending the message to.<ul>
<li>It must be in the format <code>[country code][phone number]@s.whatsapp.net</code><pre><code>  - Example for people: ```+<span class="hljs-number">19999999999</span>@s.whatsapp.net```.
  - For groups, it must be <span class="hljs-keyword">in</span> the format ``` <span class="hljs-number">123456789</span><span class="hljs-number">-123345</span>@g.us ```.
</code></pre></li>
<li>For broadcast lists, it&#39;s <code>[timestamp of creation]@broadcast</code>.</li>
<li>For stories, the ID is <code>status@broadcast</code>.</li>
</ul>
</li>
</ul>
<h2 id="utility-functions">Utility Functions</h2>
<ul>
<li><code>getContentType</code>, returns the content type for any message</li>
<li><code>getDevice</code>, returns the device from message</li>
<li><code>makeCacheableSignalKeyStore</code>, make auth store more fast</li>
<li><code>downloadContentFromMessage</code>, download content from any message</li>
</ul>
<h2 id="sending-messages">Sending Messages</h2>
<ul>
<li><p>Send all types of messages with a single function</p>
<ul>
<li><strong><a href="https://baileys.whiskeysockets.io/types/AnyMessageContent.html">Here</a> you can see all message contents supported, like text message</strong></li>
<li><p><strong><a href="https://baileys.whiskeysockets.io/types/MiscMessageGenerationOptions.html">Here</a> you can see all options supported, like quote message</strong></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> jid: <span class="hljs-built_in">string</span>
<span class="hljs-keyword">const</span> content: AnyMessageContent
<span class="hljs-keyword">const</span> options: MiscMessageGenerationOptions

sock.sendMessage(jid, content, options)
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="non-media-messages">Non-Media Messages</h3>
<h4 id="buttons-message">Buttons Message</h4>
<pre><code class="lang-javascript"><span class="hljs-comment">// send a buttons message!</span>
<span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(jid, {
     <span class="hljs-attribute">text</span>: <span class="hljs-string">"Hello World !"</span>,
     <span class="hljs-attribute">footer</span>: <span class="hljs-string">"Fizzxy - 2025"</span>,
     <span class="hljs-attribute">buttons</span>: [
     {
     <span class="hljs-attribute">buttonId</span>: <span class="hljs-built_in">`🚀`</span>, 
     <span class="hljs-attribute">buttonText</span>: {
     <span class="hljs-attribute">displayText</span>: <span class="hljs-string">'🗿'</span>
     },
     <span class="hljs-attribute">type</span>: <span class="hljs-number">1</span> 
     }
     ],
     <span class="hljs-attribute">headerType</span>: <span class="hljs-number">1</span>,
     <span class="hljs-attribute">viewOnce</span>: true
 },{ <span class="hljs-attribute">quoted</span>: null })
</code></pre>
<h4 id="buttons-flow">Buttons Flow</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(jid, {
  <span class="hljs-attribute">text</span>: <span class="hljs-string">"Hello Wolrd !;"</span>, 
  <span class="hljs-attribute">footer</span>: <span class="hljs-string">"© Fizzxy Dev"</span>,
  <span class="hljs-attribute">buttons</span>: [
  {
    <span class="hljs-attribute">buttonId</span>: <span class="hljs-string">'.tes'</span>,
    <span class="hljs-attribute">buttonText</span>: {
      <span class="hljs-attribute">displayText</span>: <span class="hljs-string">'TESTING BOT'</span>
    },
    <span class="hljs-attribute">type</span>: <span class="hljs-number">1</span>,
  },
  {
    <span class="hljs-attribute">buttonId</span>: <span class="hljs-string">' '</span>,
    <span class="hljs-attribute">buttonText</span>: {
      <span class="hljs-attribute">displayText</span>: <span class="hljs-string">'PRIVATE SCRIPT'</span>
    },
    <span class="hljs-attribute">type</span>: <span class="hljs-number">1</span>,
  },
  {
    <span class="hljs-attribute">buttonId</span>: <span class="hljs-string">'action'</span>,
    <span class="hljs-attribute">buttonText</span>: {
      <span class="hljs-attribute">displayText</span>: <span class="hljs-string">'ini pesan interactiveMeta'</span>
    },
    <span class="hljs-attribute">type</span>: <span class="hljs-number">4</span>,
    <span class="hljs-attribute">nativeFlowInfo</span>: {
      <span class="hljs-attribute">name</span>: <span class="hljs-string">'single_select'</span>,
      <span class="hljs-attribute">paramsJson</span>: JSON.stringify({
        <span class="hljs-attribute">title</span>: <span class="hljs-string">'message'</span>,
        <span class="hljs-attribute">sections</span>: [
          {
            <span class="hljs-attribute">title</span>: <span class="hljs-string">'clayzaaubert - 2025'</span>,
            <span class="hljs-attribute">highlight_label</span>: <span class="hljs-string">'😜'</span>,
            <span class="hljs-attribute">rows</span>: [
              {
                <span class="hljs-attribute">header</span>: <span class="hljs-string">'HEADER'</span>,
                <span class="hljs-attribute">title</span>: <span class="hljs-string">'TITLE'</span>,
                <span class="hljs-attribute">description</span>: <span class="hljs-string">'DESCRIPTION'</span>,
                <span class="hljs-attribute">id</span>: <span class="hljs-string">'YOUR ID'</span>,
              },
              {
                <span class="hljs-attribute">header</span>: <span class="hljs-string">'HEADER'</span>,
                <span class="hljs-attribute">title</span>: <span class="hljs-string">'TITLE'</span>,
                <span class="hljs-attribute">description</span>: <span class="hljs-string">'DESCRIPTION'</span>,
                <span class="hljs-attribute">id</span>: <span class="hljs-string">'YOUR ID'</span>,
              },
            ],
          },
        ],
      }),
    },
  },
  ],
  <span class="hljs-attribute">headerType</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attribute">viewOnce</span>: true
}, { <span class="hljs-attribute">quoted</span>: m });
</code></pre>
<h4 id="interactive-message">Interactive Message</h4>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> msg = generateWAMessageFromContent(m.chat, {
 viewOnceMessage: {
   message: {
       <span class="hljs-string">"messageContextInfo"</span>: {
         <span class="hljs-string">"deviceListMetadata"</span>: {},
         <span class="hljs-string">"deviceListMetadataVersion"</span>: <span class="hljs-number">2</span>
       },
       interactiveMessage: proto.Message.InteractiveMessage.create({
         body: proto.Message.InteractiveMessage.Body.create({
           text: <span class="hljs-string">"Fizzxy Dev"</span>
         }),
         footer: proto.Message.InteractiveMessage.Footer.create({
           text: <span class="hljs-string">"Bot"</span>
         }),
         header: proto.Message.InteractiveMessage.Header.create({
           title: <span class="hljs-string">"Igna"</span>,
           subtitle: <span class="hljs-string">"test"</span>,
           hasMediaAttachment: false
         }),
         nativeFlowMessage: proto.Message.InteractiveMessage.NativeFlowMessage.create({
           buttons: [
             {
               <span class="hljs-string">"name"</span>: <span class="hljs-string">"single_select"</span>,
               <span class="hljs-string">"buttonParamsJson"</span>: <span class="hljs-string">"{\"</span>title\<span class="hljs-string">":\"</span>title\<span class="hljs-string">",\"</span>sections\<span class="hljs-string">":[{\"</span>.menu\<span class="hljs-string">":\"</span>.play dj webito\<span class="hljs-string">",\"</span>highlight_label\<span class="hljs-string">":\"</span>label\<span class="hljs-string">",\"</span>rows\<span class="hljs-string">":[{\"</span>header\<span class="hljs-string">":\"</span>header\<span class="hljs-string">",\"</span>title\<span class="hljs-string">":\"</span>title\<span class="hljs-string">",\"</span>description\<span class="hljs-string">":\"</span>description\<span class="hljs-string">",\"</span>id\<span class="hljs-string">":\"</span>id\<span class="hljs-string">"},{\"</span>header\<span class="hljs-string">":\"</span>header\<span class="hljs-string">",\"</span>title\<span class="hljs-string">":\"</span>title\<span class="hljs-string">",\"</span>description\<span class="hljs-string">":\"</span>description\<span class="hljs-string">",\"</span>id\<span class="hljs-string">":\"</span>id\<span class="hljs-string">"}]}]}"</span>
             },
             {
               <span class="hljs-string">"name"</span>: <span class="hljs-string">"cta_reply"</span>,
               <span class="hljs-string">"buttonParamsJson"</span>: <span class="hljs-string">"{\"</span>display_text\<span class="hljs-string">":\"</span>quick_reply\<span class="hljs-string">",\"</span>id\<span class="hljs-string">":\"</span>message\<span class="hljs-string">"}"</span>
             },
             {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"cta_url"</span>,
                <span class="hljs-string">"buttonParamsJson"</span>: <span class="hljs-string">"{\"</span>display_text\<span class="hljs-string">":\"</span>url\<span class="hljs-string">",\"</span>url\<span class="hljs-string">":\"</span>https://www.google.com\<span class="hljs-string">",\"</span>merchant_url\<span class="hljs-string">":\"</span>https://www.google.com\<span class="hljs-string">"}"</span>
             },
             {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"cta_call"</span>,
                <span class="hljs-string">"buttonParamsJson"</span>: <span class="hljs-string">"{\"</span>display_text\<span class="hljs-string">":\"</span>call\<span class="hljs-string">",\"</span>id\<span class="hljs-string">":\"</span>message\<span class="hljs-string">"}"</span>
             },
             {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"cta_copy"</span>,
                <span class="hljs-string">"buttonParamsJson"</span>: <span class="hljs-string">"{\"</span>display_text\<span class="hljs-string">":\"</span>copy\<span class="hljs-string">",\"</span>id\<span class="hljs-string">":\"</span><span class="hljs-number">123456789</span>\<span class="hljs-string">",\"</span>copy_code\<span class="hljs-string">":\"</span>message\<span class="hljs-string">"}"</span>
             },
             {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"cta_reminder"</span>,
                <span class="hljs-string">"buttonParamsJson"</span>: <span class="hljs-string">"{\"</span>display_text\<span class="hljs-string">":\"</span>Recordatorio\<span class="hljs-string">",\"</span>id\<span class="hljs-string">":\"</span>message\<span class="hljs-string">"}"</span>
             },
             {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"cta_cancel_reminder"</span>,
                <span class="hljs-string">"buttonParamsJson"</span>: <span class="hljs-string">"{\"</span>display_text\<span class="hljs-string">":\"</span>cta_cancel_reminder\<span class="hljs-string">",\"</span>id\<span class="hljs-string">":\"</span>message\<span class="hljs-string">"}"</span>
             },
             {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"address_message"</span>,
                <span class="hljs-string">"buttonParamsJson"</span>: <span class="hljs-string">"{\"</span>display_text\<span class="hljs-string">":\"</span>address_message\<span class="hljs-string">",\"</span>id\<span class="hljs-string">":\"</span>message\<span class="hljs-string">"}"</span>
             },
             {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"send_location"</span>,
                <span class="hljs-string">"buttonParamsJson"</span>: <span class="hljs-string">""</span>
             }
          ],
         })
       })
   }
 }
}, {})

<span class="hljs-keyword">return</span> sock.relayMessage(msg.key.remoteJid, msg.message, { messageId: msg.key.id })
</code></pre>
<h4 id="text-message">Text Message</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(<span class="hljs-selector-tag">jid</span>, { <span class="hljs-attribute">text</span>: <span class="hljs-string">'hello word'</span> })
</code></pre>
<h4 id="quote-message-works-with-all-types-">Quote Message (works with all types)</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(<span class="hljs-selector-tag">jid</span>, { <span class="hljs-attribute">text</span>: <span class="hljs-string">'hello word'</span> }, { <span class="hljs-attribute">quoted</span>: message })
</code></pre>
<h4 id="mention-user-works-with-most-types-">Mention User (works with most types)</h4>
<ul>
<li>@number is to mention in text, it&#39;s optional<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
  <span class="hljs-selector-tag">jid</span>,
  {
      <span class="hljs-attribute">text</span>: <span class="hljs-string">'@12345678901'</span>,
      mentions: [<span class="hljs-string">'12345678901@s.whatsapp.net'</span>]
  }
)
</code></pre>
</li>
</ul>
<h4 id="mention-status">Mention Status</h4>
<ul>
<li>[ jid ] If the Jid Group and Jid Private Chat are included in the JID list, try to make the JID group first starting from the Jid Private Chat or Jid Private Chat in the middle between the group Jid<pre><code class="lang-javascript">await sock.StatusMentions(
   {
      <span class="hljs-symbol">text:</span> <span class="hljs-string">"Hello"</span>, <span class="hljs-regexp">//</span> <span class="hljs-keyword">or</span> image / video / audio ( url <span class="hljs-keyword">or</span> buffer )
   },
   [
    <span class="hljs-string">"123456789123456789@g.us"</span>,
    <span class="hljs-string">"123456789@s.whatsapp.net"</span>,
    <span class="hljs-regexp">//</span> Enter jid chat here
   ] 
)
</code></pre>
</li>
</ul>
<h4 id="result-poll-from-newsletter">Result Poll From Newsletter</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.sendMessage</span>(
    <span class="hljs-selector-tag">jid</span>,
    {
        <span class="hljs-attribute">pollResult</span>: {
            name: <span class="hljs-string">"Text poll"</span>,
            votes: [[<span class="hljs-string">"Options 1"</span>, <span class="hljs-number">10</span>], [<span class="hljs-string">"Options 2"</span>, <span class="hljs-number">10</span>]], // <span class="hljs-number">10</span> For Fake Polling Count Results
        }
    }, { <span class="hljs-attribute">quoted </span>: message }
)
</code></pre>
<h4 id="send-album-message">Send Album Message</h4>
<ul>
<li>url or buffer ( image or video ) 
```javascript
await sock.sendAlbumMessage(
  jid,
  [<pre><code> {
    <span class="hljs-attribute">image</span>: { <span class="hljs-attribute">url</span>: <span class="hljs-string">"https://example.jpg"</span> }, <span class="hljs-comment">// or buffer</span>
    <span class="hljs-attribute">caption</span>: <span class="hljs-string">"Hello World"</span>,
 },
 {
    <span class="hljs-attribute">video</span>: { <span class="hljs-attribute">url</span>: <span class="hljs-string">"https://example.mp4"</span> }, <span class="hljs-comment">// or buffer</span>
    <span class="hljs-attribute">caption</span>: <span class="hljs-string">"Hello World"</span>,
 },
</code></pre>  ],
  { <pre><code> quoted : <span class="hljs-type">message</span>, 
 <span class="hljs-keyword">delay</span> : 2000 // <span class="hljs-type">number</span> <span class="hljs-keyword">in</span> seconds
</code></pre>  }
)</li>
</ul>
<pre><code>
#### <span class="hljs-selector-tag">Interactive</span> <span class="hljs-selector-tag">Response</span> 
```<span class="hljs-selector-tag">javascript</span>
<span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.sendMessage</span>(
    jid, 
    {
        <span class="hljs-attribute">buttonReply</span>: {
             <span class="hljs-attribute">text</span>: <span class="hljs-string">'Text'</span>,
             <span class="hljs-attribute">nativeFlow</span>: { 
                <span class="hljs-attribute">version</span>: <span class="hljs-number">3</span>,
             },
        },
        <span class="hljs-attribute">type</span>: <span class="hljs-string">'interactive'</span>,
        <span class="hljs-attribute">ephemeral</span>: true,
    }
)
</code></pre><h4 id="request-payment">Request Payment</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Example</span> <span class="hljs-selector-tag">non</span> <span class="hljs-selector-tag">media</span> <span class="hljs-selector-tag">sticker</span>
<span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.sendMessage</span>(
    jid,
    {
        <span class="hljs-attribute">requestPayment</span>: {      
           <span class="hljs-attribute">currency</span>: <span class="hljs-string">"IDR"</span>,
           <span class="hljs-attribute">amount</span>: <span class="hljs-string">"10000000"</span>,
           <span class="hljs-attribute">from</span>: <span class="hljs-string">"123456@s.whatsapp.net"</span>,
           <span class="hljs-attribute">note</span>: <span class="hljs-string">"Hai Guys"</span>,
           <span class="hljs-attribute">background</span>: { ...background of the message }
        }
    },
    { <span class="hljs-attribute">quoted </span>: message }
)

<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">media</span> <span class="hljs-selector-tag">sticker</span> <span class="hljs-selector-tag">buffer</span>
<span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.sendMessage</span>(
    jid,
    {
        <span class="hljs-attribute">requestPayment</span>: {      
           <span class="hljs-attribute">currency</span>: <span class="hljs-string">"IDR"</span>,
           <span class="hljs-attribute">amount</span>: <span class="hljs-string">"10000000"</span>,
           <span class="hljs-attribute">from</span>: <span class="hljs-string">"123456@s.whatsapp.net"</span>,
           <span class="hljs-attribute">sticker</span>: Buffer,
           <span class="hljs-attribute">background</span>: { ...background of the message }
        }
    },
    { <span class="hljs-attribute">quoted </span>: message }
)

<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">media</span> <span class="hljs-selector-tag">sticker</span> <span class="hljs-selector-tag">url</span>
<span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.sendMessage</span>(
    jid,
    {
        <span class="hljs-attribute">requestPayment</span>: {      
           <span class="hljs-attribute">currency</span>: <span class="hljs-string">"IDR"</span>,
           <span class="hljs-attribute">amount</span>: <span class="hljs-string">"10000000"</span>,
           <span class="hljs-attribute">from</span>: <span class="hljs-string">"123456@s.whatsapp.net"</span>,
           <span class="hljs-attribute">sticker</span>: { <span class="hljs-attribute">url</span>: Sticker Url },
           <span class="hljs-attribute">background</span>: { ...background of the message }
        }
    },
    { <span class="hljs-attribute">quoted </span>: message }
)
</code></pre>
<h4 id="event-message">Event Message</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.sendMessage</span>(
   jid, 
   { 
       <span class="hljs-attribute">event</span>: {
           <span class="hljs-attribute">isCanceled</span>: false, <span class="hljs-comment">// or true for cancel event </span>
           <span class="hljs-attribute">name</span>: <span class="hljs-string">"Name Event"</span>, 
           <span class="hljs-attribute">description</span>: <span class="hljs-string">"Description Event"</span>,
           <span class="hljs-attribute">location</span>: { 
               <span class="hljs-attribute">degressLatitude</span>: -<span class="hljs-number">0</span>, 
               <span class="hljs-attribute">degressLongitude</span>: - <span class="hljs-number">0</span> 
           },
           <span class="hljs-attribute">link</span>: Call Link,
           <span class="hljs-attribute">startTime</span>: m.messageTimestamp.low,
           <span class="hljs-attribute">endTime</span>: m.messageTimestamp.low + <span class="hljs-number">86400</span>, <span class="hljs-comment">// 86400 is day in seconds</span>
           <span class="hljs-attribute">extraGuestsAllowed</span>: true <span class="hljs-comment">// or false</span>
       }
   },
   { <span class="hljs-attribute">quoted </span>: message }
)
</code></pre>
<h4 id="interactive">Interactive</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Example</span> <span class="hljs-selector-tag">non</span> <span class="hljs-selector-tag">header</span> <span class="hljs-selector-tag">media</span>
<span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.sendMessage</span>(
    jid,
    {
        <span class="hljs-attribute">text</span>: <span class="hljs-string">"Description Of Messages"</span>, <span class="hljs-comment">//Additional information</span>
        <span class="hljs-attribute">title</span>: <span class="hljs-string">"Title Of Messages"</span>,
        <span class="hljs-attribute">subtitle</span>: <span class="hljs-string">"Subtitle Message"</span>,
        <span class="hljs-attribute">footer</span>: <span class="hljs-string">"Footer Messages"</span>,
        <span class="hljs-attribute">interactiveButtons</span>: [
             {
                <span class="hljs-attribute">name</span>: <span class="hljs-string">"quick_reply"</span>,
                <span class="hljs-attribute">buttonParamsJson</span>: JSON.stringify({
                     <span class="hljs-attribute">display_text</span>: <span class="hljs-string">"Display Button"</span>,
                     <span class="hljs-attribute">id</span>: <span class="hljs-string">"ID"</span>
                })
             },
             {
                <span class="hljs-attribute">name</span>: <span class="hljs-string">"cta_url"</span>,
                <span class="hljs-attribute">buttonParamsJson</span>: JSON.stringify({
                     <span class="hljs-attribute">display_text</span>: <span class="hljs-string">"Display Button"</span>,
                     <span class="hljs-attribute">url</span>: <span class="hljs-string">"https://www.example.com"</span>
                })
             }
        ]
    },
  {
    <span class="hljs-attribute">quoted </span>: message
  }
)

<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Example</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">media</span>
<span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.sendMessage</span>(
    jid,
    {
        <span class="hljs-attribute">image</span>: { <span class="hljs-attribute">url </span>: <span class="hljs-string">"https://example.jpg"</span> }, <span class="hljs-comment">// Can buffer</span>
        <span class="hljs-attribute">caption</span>: <span class="hljs-string">"Description Of Messages"</span>, <span class="hljs-comment">//Additional information</span>
        <span class="hljs-attribute">title</span>: <span class="hljs-string">"Title Of Messages"</span>,
        <span class="hljs-attribute">subtitle</span>: <span class="hljs-string">"Subtile Message"</span>,
        <span class="hljs-attribute">footer</span>: <span class="hljs-string">"Footer Messages"</span>,
        <span class="hljs-attribute">media</span>: true,
        <span class="hljs-attribute">interactiveButtons</span>: [
             {
                <span class="hljs-attribute">name</span>: <span class="hljs-string">"quick_reply"</span>,
                <span class="hljs-attribute">buttonParamsJson</span>: JSON.stringify({
                     <span class="hljs-attribute">display_text</span>: <span class="hljs-string">"Display Button"</span>,
                     <span class="hljs-attribute">id</span>: <span class="hljs-string">"ID"</span>
                })
             },
             {
                <span class="hljs-attribute">name</span>: <span class="hljs-string">"cta_url"</span>,
                <span class="hljs-attribute">buttonParamsJson</span>: JSON.stringify({
                     <span class="hljs-attribute">display_text</span>: <span class="hljs-string">"Display Button"</span>,
                     <span class="hljs-attribute">url</span>: <span class="hljs-string">"https://www.example.com"</span>
                })
             }
        ]
    },
  {
    <span class="hljs-attribute">quoted </span>: message
  }
)

<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Example</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">header</span> <span class="hljs-selector-tag">product</span>
<span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.sendMessage</span>(
    jid,
    {
        <span class="hljs-attribute">product</span>: {
            <span class="hljs-attribute">productImage</span>: { <span class="hljs-attribute">url</span>: "<span class="hljs-attribute">https</span>:<span class="hljs-comment">//example.jpg }, //or buffer</span>
            <span class="hljs-attribute">productImageCount</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attribute">title</span>: <span class="hljs-string">"Title Product"</span>,
            <span class="hljs-attribute">description</span>: <span class="hljs-string">"Description Product"</span>,
            <span class="hljs-attribute">priceAmount1000</span>: <span class="hljs-number">20000</span> * <span class="hljs-number">1000</span>,
            <span class="hljs-attribute">currencyCode</span>: <span class="hljs-string">"IDR"</span>,
            <span class="hljs-attribute">retailerId</span>: <span class="hljs-string">"Retail"</span>,
            <span class="hljs-attribute">url</span>: <span class="hljs-string">"https://example.com"</span>,            
        },
        <span class="hljs-attribute">businessOwnerJid</span>: <span class="hljs-string">"1234@s.whatsapp.net"</span>,
        <span class="hljs-attribute">caption</span>: <span class="hljs-string">"Description Of Messages"</span>, <span class="hljs-comment">//Additional information</span>
        <span class="hljs-attribute">title</span>: <span class="hljs-string">"Title Of Messages"</span>,
        <span class="hljs-attribute">footer</span>: <span class="hljs-string">"Footer Messages"</span>,
        <span class="hljs-attribute">media</span>: true,
        <span class="hljs-attribute">interactiveButtons</span>: [
             {
                <span class="hljs-attribute">name</span>: <span class="hljs-string">"quick_reply"</span>,
                <span class="hljs-attribute">buttonParamsJson</span>: JSON.stringify({
                     <span class="hljs-attribute">display_text</span>: <span class="hljs-string">"Display Button"</span>,
                     <span class="hljs-attribute">id</span>: <span class="hljs-string">"ID"</span>
                })
             },
             {
                <span class="hljs-attribute">name</span>: <span class="hljs-string">"cta_url"</span>,
                <span class="hljs-attribute">buttonParamsJson</span>: JSON.stringify({
                     <span class="hljs-attribute">display_text</span>: <span class="hljs-string">"Display Button"</span>,
                     <span class="hljs-attribute">url</span>: <span class="hljs-string">"https://www.example.com"</span>
                })
             }
        ]
    },
  {
    <span class="hljs-attribute">quoted </span>: message
  }
)
</code></pre>
<h4 id="forward-messages">Forward Messages</h4>
<ul>
<li>You need to have message object, can be retrieved from <a href="#implementing-a-data-store">store</a> or use a <a href="https://baileys.whiskeysockets.io/types/WAMessage.html">message</a> object<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> msg = getMessageFromStore() <span class="hljs-comment">// implement this on your end</span>
<span class="hljs-keyword">await</span> sock.sendMessage(jid, { forward: msg }) <span class="hljs-comment">// WA forward the message!</span>
</code></pre>
</li>
</ul>
<h4 id="location-message">Location Message</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
    <span class="hljs-selector-tag">jid</span>,
    {
        <span class="hljs-attribute">location</span>: {
            degreesLatitude: <span class="hljs-number">24.121231</span>,
            degreesLongitude: <span class="hljs-number">55.1121221</span>
        }
    }
)
</code></pre>
<h4 id="contact-message">Contact Message</h4>
<pre><code class="lang-javascript">const vcard = <span class="hljs-symbol">'BEGIN</span>:<span class="hljs-type">VCARD</span>\n' <span class="hljs-comment">// metadata of the contact card</span>
            + <span class="hljs-symbol">'VERSION</span>:<span class="hljs-number">3.0</span>\n'
            + <span class="hljs-symbol">'FN</span>:<span class="hljs-type">Jeff</span> <span class="hljs-type">Singh</span>\n' <span class="hljs-comment">// full name</span>
            + <span class="hljs-symbol">'ORG</span>:<span class="hljs-type">Ashoka</span> <span class="hljs-type">Uni</span>;\n' <span class="hljs-comment">// the organization of the contact</span>
            + <span class="hljs-symbol">'TEL</span>;<span class="hljs-class"><span class="hljs-keyword">type</span><span class="hljs-title">=CELL</span></span>;<span class="hljs-class"><span class="hljs-keyword">type</span><span class="hljs-title">=VOICE</span></span>;waid=<span class="hljs-number">911234567890</span>:+<span class="hljs-number">91</span> <span class="hljs-number">12345</span> <span class="hljs-number">67890</span>\n' <span class="hljs-comment">// WhatsApp ID + phone number</span>
            + <span class="hljs-symbol">'END</span>:<span class="hljs-type">VCARD</span>'

await sock.sendMessage(
    id,
    {
        contacts: {
            displayName: <span class="hljs-symbol">'Jef</span>f',
            contacts: [{ vcard }]
        }
    }
)
</code></pre>
<h4 id="reaction-message">Reaction Message</h4>
<ul>
<li>You need to pass the key of message, you can retrieve from <a href="#implementing-a-data-store">store</a> or use a <a href="https://baileys.whiskeysockets.io/types/WAMessageKey.html">key</a> object<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
  jid,
  {
      <span class="hljs-attribute">react</span>: {
          <span class="hljs-attribute">text</span>: <span class="hljs-string">'💖'</span>, <span class="hljs-comment">// use an empty string to remove the reaction</span>
          <span class="hljs-attribute">key</span>: message.key
      }
  }
)
</code></pre>
</li>
</ul>
<h4 id="pin-message">Pin Message</h4>
<ul>
<li><p>You need to pass the key of message, you can retrieve from <a href="#implementing-a-data-store">store</a> or use a <a href="https://baileys.whiskeysockets.io/types/WAMessageKey.html">key</a> object</p>
</li>
<li><p>Time can be:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Seconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>24h</td>
<td>86.400</td>
</tr>
<tr>
<td>7d</td>
<td>604.800</td>
</tr>
<tr>
<td>30d</td>
<td>2.592.000</td>
</tr>
</tbody>
</table>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
    jid,
    {
        <span class="hljs-attribute">pin</span>: {
            <span class="hljs-attribute">type</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 0 to remove</span>
            <span class="hljs-attribute">time</span>: <span class="hljs-number">86400</span>
            <span class="hljs-attribute">key</span>: message.key
        }
    }
)
</code></pre>
<h4 id="poll-message">Poll Message</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
    jid,
    {
        <span class="hljs-attribute">poll</span>: {
            <span class="hljs-attribute">name</span>: <span class="hljs-string">'My Poll'</span>,
            <span class="hljs-attribute">values</span>: [<span class="hljs-string">'Option 1'</span>, <span class="hljs-string">'Option 2'</span>, ...],
            <span class="hljs-attribute">selectableCount</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attribute">toAnnouncementGroup</span>: false <span class="hljs-comment">// or true</span>
        }
    }
)
</code></pre>
<h3 id="sending-messages-with-link-previews">Sending Messages with Link Previews</h3>
<ol>
<li>By default, wa does not have link generation when sent from the web</li>
<li>Baileys has a function to generate the content for these link previews</li>
<li>To enable this function&#39;s usage, add <code>link-preview-js</code> as a dependency to your project with <code>yarn add link-preview-js</code></li>
<li>Send a link:<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
 <span class="hljs-selector-tag">jid</span>,
 {
     <span class="hljs-attribute">text</span>: <span class="hljs-string">'Hi, this was sent using https://github.com/whiskeysockets/baileys'</span>
 }
)
</code></pre>
</li>
</ol>
<h3 id="media-messages">Media Messages</h3>
<p>Sending media (video, stickers, images) is easier &amp; more efficient than ever.</p>
<blockquote>
<p>[!NOTE]
In media messages, you can pass <code>{ stream: Stream }</code> or <code>{ url: Url }</code> or <code>Buffer</code> directly, you can see more <a href="https://baileys.whiskeysockets.io/types/WAMediaUpload.html">here</a></p>
</blockquote>
<ul>
<li>When specifying a media url, Baileys never loads the entire buffer into memory; it even encrypts the media as a readable stream.</li>
</ul>
<blockquote>
<p>[!TIP]
It&#39;s recommended to use Stream or Url to save memory</p>
</blockquote>
<h4 id="gif-message">Gif Message</h4>
<ul>
<li>Whatsapp doesn&#39;t support <code>.gif</code> files, that&#39;s why we send gifs as common <code>.mp4</code> video with <code>gifPlayback</code> flag<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
  <span class="hljs-selector-tag">jid</span>,
  {
      <span class="hljs-attribute">video</span>: fs.<span class="hljs-built_in">readFileSync</span>(<span class="hljs-string">'Media/ma_gif.mp4'</span>),
      caption: <span class="hljs-string">'hello word'</span>,
      gifPlayback: true
  }
)
</code></pre>
</li>
</ul>
<h4 id="video-message">Video Message</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
    id,
    {
        <span class="hljs-attribute">video</span>: {
            <span class="hljs-attribute">url</span>: <span class="hljs-string">'./Media/ma_gif.mp4'</span>
        },
        <span class="hljs-attribute">caption</span>: <span class="hljs-string">'hello word'</span>,
            <span class="hljs-attribute">ptv</span>: false <span class="hljs-comment">// if set to true, will send as a `video note`</span>
    }
)
</code></pre>
<h4 id="audio-message">Audio Message</h4>
<ul>
<li>To audio message work in all devices you need to convert with some tool like <code>ffmpeg</code> with this flags:<pre><code class="lang-bash"><span class="hljs-symbol">      codec:</span> libopus <span class="hljs-comment">//ogg file</span>
<span class="hljs-symbol">      ac:</span> <span class="hljs-number">1</span> <span class="hljs-comment">//one channel</span>
      avoid_negative_ts
      make_zero
</code></pre>
<ul>
<li>Example:<pre><code class="lang-bash">ffmpeg -<span class="hljs-selector-tag">i</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-class">.mp4</span> -avoid_negative_ts make_zero -ac <span class="hljs-number">1</span> output.ogg
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
jid,
{
  <span class="hljs-attribute">audio</span>: {
      <span class="hljs-attribute">url</span>: <span class="hljs-string">'./Media/audio.mp3'</span>
  },
  <span class="hljs-attribute">mimetype</span>: <span class="hljs-string">'audio/mp4'</span>
}
)
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 id="image-message">Image Message</h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
    id,
    {
        <span class="hljs-attribute">image</span>: {
            <span class="hljs-attribute">url</span>: <span class="hljs-string">'./Media/ma_img.png'</span>
        },
        <span class="hljs-attribute">caption</span>: <span class="hljs-string">'hello word'</span>
    }
)
</code></pre>
<h4 id="view-once-message">View Once Message</h4>
<ul>
<li>You can send all messages above as <code>viewOnce</code>, you only need to pass <code>viewOnce: true</code> in content object</li>
</ul>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
    id,
    {
        <span class="hljs-attribute">image</span>: {
            <span class="hljs-attribute">url</span>: <span class="hljs-string">'./Media/ma_img.png'</span>
        },
        <span class="hljs-attribute">viewOnce</span>: true, <span class="hljs-comment">//works with video, audio too</span>
        <span class="hljs-attribute">caption</span>: <span class="hljs-string">'hello word'</span>
    }
)
</code></pre>
<h2 id="modify-messages">Modify Messages</h2>
<h3 id="deleting-messages-for-everyone-">Deleting Messages (for everyone)</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> msg = await sock.sendMessage(jid, { <span class="hljs-built_in">text</span>: <span class="hljs-string">'hello word'</span> })
await sock.sendMessage(jid, { <span class="hljs-keyword">delete</span>: msg.key })
</code></pre>
<p><strong>Note:</strong> deleting for oneself is supported via <code>chatModify</code>, see in <a href="#modifying-chats">this section</a></p>
<h3 id="editing-messages">Editing Messages</h3>
<ul>
<li>You can pass all editable contents here<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(<span class="hljs-selector-tag">jid</span>, {
    <span class="hljs-attribute">text</span>: <span class="hljs-string">'updated text goes here'</span>,
    edit: response.key,
  });
</code></pre>
</li>
</ul>
<h2 id="manipulating-media-messages">Manipulating Media Messages</h2>
<h3 id="thumbnail-in-media-messages">Thumbnail in Media Messages</h3>
<ul>
<li>For media messages, the thumbnail can be generated automatically for images &amp; stickers provided you add <code>jimp</code> or <code>sharp</code> as a dependency in your project using <code>yarn add jimp</code> or <code>yarn add sharp</code>.</li>
<li>Thumbnails for videos can also be generated automatically, though, you need to have <code>ffmpeg</code> installed on your system.</li>
</ul>
<h3 id="downloading-media-messages">Downloading Media Messages</h3>
<p>If you want to save the media you received</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> { createWriteStream } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { downloadMediaMessage, getContentType } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@clayzaaubert/baileys-rise"</span>);

sock.ev.on(<span class="hljs-string">'messages.upsert'</span>, <span class="hljs-keyword">async</span> ({ [m] }) =&gt; {
    <span class="hljs-keyword">if</span> (!m.message) <span class="hljs-keyword">return</span> <span class="hljs-comment">// if there is no text or media message</span>
    <span class="hljs-keyword">const</span> messageType = getContentType(m) <span class="hljs-comment">// get what type of message it is (text, image, video...)</span>

    <span class="hljs-comment">// if the message is an image</span>
    <span class="hljs-keyword">if</span> (messageType === <span class="hljs-string">'imageMessage'</span>) {
        <span class="hljs-comment">// download the message</span>
        <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> downloadMediaMessage(
            m,
            <span class="hljs-string">'stream'</span>, <span class="hljs-comment">// can be 'buffer' too</span>
            { },
            {
                logger,
                <span class="hljs-comment">// pass this so that baileys can request a reupload of media</span>
                <span class="hljs-comment">// that has been deleted</span>
                reuploadRequest: sock.updateMediaMessage
            }
        )
        <span class="hljs-comment">// save to file</span>
        <span class="hljs-keyword">const</span> writeStream = createWriteStream(<span class="hljs-string">'./my-download.jpeg'</span>)
        stream.pipe(writeStream)
    }
}
</code></pre>
<h3 id="re-upload-media-message-to-whatsapp">Re-upload Media Message to Whatsapp</h3>
<ul>
<li>WhatsApp automatically removes old media from their servers. For the device to access said media -- a re-upload is required by another device that has it. This can be accomplished using:<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.updateMediaMessage(msg)
</code></pre>
</li>
</ul>
<h2 id="reject-call">Reject Call</h2>
<ul>
<li>You can obtain <code>callId</code> and <code>callFrom</code> from <code>call</code> event</li>
</ul>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.rejectCall(callId, callFrom)
</code></pre>
<h2 id="send-states-in-chat">Send States in Chat</h2>
<h3 id="reading-messages">Reading Messages</h3>
<ul>
<li>A set of message <a href="https://baileys.whiskeysockets.io/types/WAMessageKey.html">keys</a> must be explicitly marked read now.</li>
<li>You cannot mark an entire &#39;chat&#39; read as it were with Baileys Web.
This means you have to keep track of unread messages.</li>
</ul>
<pre><code class="lang-javascript">const key: WAMessageKey
// can pass multiple <span class="hljs-built_in">keys</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">read</span> multiple <span class="hljs-keyword">messages</span> <span class="hljs-keyword">as</span> well
await sock.readMessages([key])
</code></pre>
<p>The message ID is the unique identifier of the message that you are marking as read.
On a <code>WAMessage</code>, the <code>messageID</code> can be accessed using <code>messageID = message.key.id</code>.</p>
<h3 id="update-presence">Update Presence</h3>
<ul>
<li><code>presence</code> can be one of <a href="https://baileys.whiskeysockets.io/types/WAPresence.html">these</a></li>
<li>The presence expires after about 10 seconds.</li>
<li>This lets the person/group with <code>jid</code> know whether you&#39;re online, offline, typing etc.</li>
</ul>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.sendPresenceUpdate(<span class="hljs-string">'available'</span>, jid)
</code></pre>
<blockquote>
<p>[!NOTE]
If a desktop client is active, WA doesn&#39;t send push notifications to the device. If you would like to receive said notifications -- mark your Baileys client offline using <code>sock.sendPresenceUpdate(&#39;unavailable&#39;)</code></p>
</blockquote>
<h2 id="modifying-chats">Modifying Chats</h2>
<p>WA uses an encrypted form of communication to send chat/app updates. This has been implemented mostly and you can send the following updates:</p>
<blockquote>
<p>[!IMPORTANT]
If you mess up one of your updates, WA can log you out of all your devices and you&#39;ll have to log in again.</p>
</blockquote>
<h3 id="archive-a-chat">Archive a Chat</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> lastMsgInChat = <span class="hljs-keyword">await</span> getLastMessageInChat(jid) <span class="hljs-comment">// implement this on your end</span>
<span class="hljs-keyword">await</span> sock.chatModify({ archive: <span class="hljs-literal">true</span>, lastMessages: [lastMsgInChat] }, jid)
</code></pre>
<h3 id="mute-unmute-a-chat">Mute/Unmute a Chat</h3>
<ul>
<li>Supported times:</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Miliseconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>Remove</td>
<td>null</td>
</tr>
<tr>
<td>8h</td>
<td>86.400.000</td>
</tr>
<tr>
<td>7d</td>
<td>604.800.000</td>
</tr>
</tbody>
</table>
<pre><code class="lang-javascript"><span class="hljs-comment">// mute for 8 hours</span>
<span class="hljs-keyword">await</span> sock.chatModify({ mute: <span class="hljs-number">8</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> }, jid)
<span class="hljs-comment">// unmute</span>
<span class="hljs-keyword">await</span> sock.chatModify({ mute: <span class="hljs-literal">null</span> }, jid)
</code></pre>
<h3 id="mark-a-chat-read-unread">Mark a Chat Read/Unread</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> lastMsgInChat = <span class="hljs-keyword">await</span> getLastMessageInChat(jid) <span class="hljs-comment">// implement this on your end</span>
<span class="hljs-comment">// mark it unread</span>
<span class="hljs-keyword">await</span> sock.chatModify({ markRead: <span class="hljs-literal">false</span>, lastMessages: [lastMsgInChat] }, jid)
</code></pre>
<h3 id="delete-a-message-for-me">Delete a Message for Me</h3>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.chatModify</span>(
    {
        <span class="hljs-attribute">clear</span>: {
            <span class="hljs-attribute">messages</span>: [
                {
                    <span class="hljs-attribute">id</span>: <span class="hljs-string">'ATWYHDNNWU81732J'</span>,
                    <span class="hljs-attribute">fromMe</span>: true,
                    <span class="hljs-attribute">timestamp</span>: <span class="hljs-string">'1654823909'</span>
                }
            ]
        }
    },
    jid
)
</code></pre>
<h3 id="delete-a-chat">Delete a Chat</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> lastMsgInChat = <span class="hljs-keyword">await</span> getLastMessageInChat(jid) <span class="hljs-comment">// implement this on your end</span>
<span class="hljs-keyword">await</span> sock.chatModify({
        delete: <span class="hljs-literal">true</span>,
        lastMessages: [
            {
                key: lastMsgInChat.key,
                messageTimestamp: lastMsgInChat.messageTimestamp
            }
        ]
    },
    jid
)
</code></pre>
<h3 id="pin-unpin-a-chat">Pin/Unpin a Chat</h3>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.chatModify</span>({
        <span class="hljs-attribute">pin</span>: true // or `false` to unpin
    },
    <span class="hljs-selector-tag">jid</span>
)
</code></pre>
<h3 id="star-unstar-a-message">Star/Unstar a Message</h3>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.chatModify</span>({
        <span class="hljs-attribute">star</span>: {
            <span class="hljs-attribute">messages</span>: [
                {
                    <span class="hljs-attribute">id</span>: <span class="hljs-string">'messageID'</span>,
                    <span class="hljs-attribute">fromMe</span>: true <span class="hljs-comment">// or `false`</span>
                }
            ],
            <span class="hljs-attribute">star</span>: true <span class="hljs-comment">// - true: Star Message; false: Unstar Message</span>
        }
    },
    jid
)
</code></pre>
<h3 id="disappearing-messages">Disappearing Messages</h3>
<ul>
<li>Ephemeral can be:</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Seconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>Remove</td>
<td>0</td>
</tr>
<tr>
<td>24h</td>
<td>86.400</td>
</tr>
<tr>
<td>7d</td>
<td>604.800</td>
</tr>
<tr>
<td>90d</td>
<td>7.776.000</td>
</tr>
</tbody>
</table>
<ul>
<li>You need to pass in <strong>Seconds</strong>, default is 7 days</li>
</ul>
<pre><code class="lang-javascript"><span class="hljs-comment">// turn on disappearing messages</span>
await sock.sendMessage(
    jid,
    <span class="hljs-comment">// this is 1 week in seconds -- how long you want messages to appear for</span>
    { <span class="hljs-string">disappearingMessagesInChat:</span> WA_DEFAULT_EPHEMERAL }
)

<span class="hljs-comment">// will send as a disappearing message</span>
await sock.sendMessage(jid, { <span class="hljs-string">text:</span> <span class="hljs-string">'hello'</span> }, { <span class="hljs-string">ephemeralExpiration:</span> WA_DEFAULT_EPHEMERAL })

<span class="hljs-comment">// turn off disappearing messages</span>
await sock.sendMessage(
    jid,
    { <span class="hljs-string">disappearingMessagesInChat:</span> <span class="hljs-literal">false</span> }
)
</code></pre>
<h2 id="user-querys">User Querys</h2>
<h3 id="check-if-id-exists-in-whatsapp">Check If ID Exists in Whatsapp</h3>
<pre><code class="lang-javascript">const [<span class="hljs-literal">result</span>] = await sock.onWhatsApp(jid)
<span class="hljs-keyword">if</span> (<span class="hljs-literal">result</span>.exists) console.<span class="hljs-built_in">log</span> (`${jid} exists <span class="hljs-keyword">on</span> WhatsApp, <span class="hljs-keyword">as</span> jid: ${<span class="hljs-literal">result</span>.jid}`)
</code></pre>
<h3 id="query-chat-history-groups-too-">Query Chat History (groups too)</h3>
<ul>
<li>You need to have oldest message in chat<pre><code class="lang-javascript">const msg = await getOldestMessageInChat(jid)
await sock.fetchMessageHistory(
  <span class="hljs-number">50</span>, <span class="hljs-comment">//quantity (max: 50 per query)</span>
  msg<span class="hljs-selector-class">.key</span>,
  msg<span class="hljs-selector-class">.messageTimestamp</span>
)
</code></pre>
</li>
<li>Messages will be received in <code>messaging.history-set</code> event</li>
</ul>
<h3 id="fetch-status">Fetch Status</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> status = <span class="hljs-keyword">await</span> sock.fetchStatus(jid)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'status: '</span> + status)
</code></pre>
<h3 id="fetch-profile-picture-groups-too-">Fetch Profile Picture (groups too)</h3>
<ul>
<li>To get the display picture of some person/group
```javascript
// for low res picture
const ppUrl = await sock.profilePictureUrl(jid)
console.log(ppUrl)</li>
</ul>
<p>// for high res picture
const ppUrl = await sock.profilePictureUrl(jid, &#39;image&#39;)</p>
<pre><code>
### Fetch Bussines Profile (such <span class="hljs-keyword">as</span> description or category)
```javascript
const profile = await sock.getBusinessProfile(jid)
console.log(<span class="hljs-string">'business description: '</span> + profile.description + <span class="hljs-string">', category: '</span> + profile.category)
</code></pre><h3 id="fetch-someone-s-presence-if-they-re-typing-or-online-">Fetch Someone&#39;s Presence (if they&#39;re typing or online)</h3>
<pre><code class="lang-javascript"><span class="hljs-comment">// the presence update is fetched and called here</span>
sock<span class="hljs-selector-class">.ev</span><span class="hljs-selector-class">.on</span>(<span class="hljs-string">'presence.update'</span>, console.log)

<span class="hljs-comment">// request updates for a chat</span>
await sock.presenceSubscribe(jid)
</code></pre>
<h2 id="change-profile">Change Profile</h2>
<h3 id="change-profile-status">Change Profile Status</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.updateProfileStatus(<span class="hljs-string">'Hello World!'</span>)
</code></pre>
<h3 id="change-profile-name">Change Profile Name</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.updateProfileName(<span class="hljs-string">'My name'</span>)
</code></pre>
<h3 id="change-display-picture-groups-too-">Change Display Picture (groups too)</h3>
<ul>
<li>To change your display picture or a group&#39;s</li>
</ul>
<blockquote>
<p>[!NOTE]
Like media messages, you can pass <code>{ stream: Stream }</code> or <code>{ url: Url }</code> or <code>Buffer</code> directly, you can see more <a href="https://baileys.whiskeysockets.io/types/WAMediaUpload.html">here</a></p>
</blockquote>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.updateProfilePicture</span>(<span class="hljs-selector-tag">jid</span>, { <span class="hljs-attribute">url</span>: <span class="hljs-string">'./new-profile-picture.jpeg'</span> })
</code></pre>
<h3 id="remove-display-picture-groups-too-">Remove display picture (groups too)</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.removeProfilePicture(jid)
</code></pre>
<h2 id="groups">Groups</h2>
<ul>
<li>To change group properties you need to be admin</li>
</ul>
<h3 id="create-a-group">Create a Group</h3>
<pre><code class="lang-javascript"><span class="hljs-comment">// title &amp; participants</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">group</span> = <span class="hljs-keyword">await</span> sock.groupCreate(<span class="hljs-string">'My Fab Group'</span>, [<span class="hljs-string">'1234@s.whatsapp.net'</span>, <span class="hljs-string">'4564@s.whatsapp.net'</span>])
console.log(<span class="hljs-string">'created group with id: '</span> + <span class="hljs-keyword">group</span>.gid)
<span class="hljs-keyword">await</span> sock.sendMessage(<span class="hljs-keyword">group</span>.id, { text: <span class="hljs-string">'hello there'</span> }) <span class="hljs-comment">// say hello to everyone on the group</span>
</code></pre>
<h3 id="add-remove-or-demote-promote">Add/Remove or Demote/Promote</h3>
<pre><code class="lang-javascript">// id &amp; people <span class="hljs-keyword">to</span> add <span class="hljs-keyword">to</span> the <span class="hljs-keyword">group</span> (will throw <span class="hljs-literal">error</span> <span class="hljs-keyword">if</span> it fails)
await sock.groupParticipantsUpdate(
    jid,
    [<span class="hljs-symbol">'abcd</span>@s.whatsapp.net', <span class="hljs-symbol">'efgh</span>@s.whatsapp.net'],
    <span class="hljs-symbol">'add</span>' // replace this parameter <span class="hljs-keyword">with</span> <span class="hljs-symbol">'remove</span>' <span class="hljs-keyword">or</span> <span class="hljs-symbol">'demote</span>' <span class="hljs-keyword">or</span> <span class="hljs-symbol">'promote</span>'
)
</code></pre>
<h3 id="change-subject-name-">Change Subject (name)</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.groupUpdateSubject(jid, <span class="hljs-string">'New Subject!'</span>)
</code></pre>
<h3 id="change-description">Change Description</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.groupUpdateDescription(jid, <span class="hljs-string">'New Description!'</span>)
</code></pre>
<h3 id="change-settings">Change Settings</h3>
<pre><code class="lang-javascript"><span class="hljs-comment">// only allow admins to send messages</span>
<span class="hljs-keyword">await</span> sock.groupSettingUpdate(jid, <span class="hljs-string">'announcement'</span>)
<span class="hljs-comment">// allow everyone to send messages</span>
<span class="hljs-keyword">await</span> sock.groupSettingUpdate(jid, <span class="hljs-string">'not_announcement'</span>)
<span class="hljs-comment">// allow everyone to modify the group's settings -- like display picture etc.</span>
<span class="hljs-keyword">await</span> sock.groupSettingUpdate(jid, <span class="hljs-string">'unlocked'</span>)
<span class="hljs-comment">// only allow admins to modify the group's settings</span>
<span class="hljs-keyword">await</span> sock.groupSettingUpdate(jid, <span class="hljs-string">'locked'</span>)
</code></pre>
<h3 id="leave-a-group">Leave a Group</h3>
<pre><code class="lang-javascript"><span class="hljs-comment">// will throw error if it fails</span>
<span class="hljs-keyword">await</span> sock.groupLeave(jid)
</code></pre>
<h3 id="get-invite-code">Get Invite Code</h3>
<ul>
<li>To create link with code use <code>&#39;https://chat.whatsapp.com/&#39; + code</code><pre><code class="lang-javascript">const <span class="hljs-built_in">code</span> = await sock.groupInviteCode(jid)
console.<span class="hljs-built_in">log</span>('group <span class="hljs-built_in">code</span>: ' + <span class="hljs-built_in">code</span>)
</code></pre>
<h3 id="revoke-invite-code">Revoke Invite Code</h3>
<pre><code class="lang-javascript">const <span class="hljs-built_in">code</span> = await sock.groupRevokeInvite(jid)
console.<span class="hljs-built_in">log</span>('<span class="hljs-keyword">New</span> group <span class="hljs-built_in">code</span>: ' + <span class="hljs-built_in">code</span>)
</code></pre>
<h3 id="join-using-invitation-code">Join Using Invitation Code</h3>
</li>
<li><p>Code can&#39;t have <code>https://chat.whatsapp.com/</code>, only code</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> sock.groupAcceptInvite(code)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'joined to: '</span> + response)
</code></pre>
<h3 id="get-group-info-by-invite-code">Get Group Info by Invite Code</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> sock.groupGetInviteInfo(code)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'group information: '</span> + response)
</code></pre>
<h3 id="query-metadata-participants-name-description-">Query Metadata (participants, name, description...)</h3>
<pre><code class="lang-javascript">const metadata = await sock.groupMetadata(jid)
console.log(metadata<span class="hljs-selector-class">.id</span> + <span class="hljs-string">', title: '</span> + metadata<span class="hljs-selector-class">.subject</span> + <span class="hljs-string">', description: '</span> + metadata.desc)
</code></pre>
<h3 id="join-using-groupinvitemessage-">Join using <code>groupInviteMessage</code></h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> sock.groupAcceptInviteV4(jid, groupInviteMessage)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'joined to: '</span> + response)
</code></pre>
<h3 id="get-request-join-list">Get Request Join List</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> <span class="hljs-built_in">response</span> = await sock.groupRequestParticipantsList(jid)
console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">response</span>)
</code></pre>
<h3 id="approve-reject-request-join">Approve/Reject Request Join</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> sock.groupRequestParticipantsUpdate(
  jid, <span class="hljs-comment">// group id</span>
  [<span class="hljs-string">'abcd@s.whatsapp.net'</span>, <span class="hljs-string">'efgh@s.whatsapp.net'</span>],
  <span class="hljs-string">'approve'</span> <span class="hljs-comment">// or 'reject'</span>
)
<span class="hljs-built_in">console</span>.log(response)
</code></pre>
<h3 id="get-all-participating-groups-metadata">Get All Participating Groups Metadata</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> <span class="hljs-built_in">response</span> = await sock.groupFetchAllParticipating()
console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">response</span>)
</code></pre>
<h3 id="toggle-ephemeral">Toggle Ephemeral</h3>
</li>
<li><p>Ephemeral can be:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Seconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>Remove</td>
<td>0</td>
</tr>
<tr>
<td>24h</td>
<td>86.400</td>
</tr>
<tr>
<td>7d</td>
<td>604.800</td>
</tr>
<tr>
<td>90d</td>
<td>7.776.000</td>
</tr>
</tbody>
</table>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.groupToggleEphemeral(jid, <span class="hljs-number">86400</span>)
</code></pre>
<h3 id="change-add-mode">Change Add Mode</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.groupMemberAddMode(
    jid,
    <span class="hljs-string">'all_member_add'</span> // <span class="hljs-keyword">or</span> <span class="hljs-string">'admin_add'</span>
)
</code></pre>
<h2 id="privacy">Privacy</h2>
<h3 id="block-unblock-user">Block/Unblock User</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">await</span> sock.updateBlockStatus(jid, <span class="hljs-string">'block'</span>) <span class="hljs-comment">// Block user</span>
<span class="hljs-keyword">await</span> sock.updateBlockStatus(jid, <span class="hljs-string">'unblock'</span>) <span class="hljs-comment">// Unblock user</span>
</code></pre>
<h3 id="get-privacy-settings">Get Privacy Settings</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> privacySettings = <span class="hljs-keyword">await</span> sock.fetchPrivacySettings(<span class="hljs-literal">true</span>)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'privacy settings: '</span> + privacySettings)
</code></pre>
<h3 id="get-blocklist">Get BlockList</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> <span class="hljs-built_in">response</span> = await sock.fetchBlocklist()
console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">response</span>)
</code></pre>
<h3 id="update-lastseen-privacy">Update LastSeen Privacy</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> <span class="hljs-keyword">value</span> = <span class="hljs-string">'all'</span> <span class="hljs-comment">// 'contacts' | 'contact_blacklist' | 'none'</span>
<span class="hljs-keyword">await</span> sock.updateLastSeenPrivacy(<span class="hljs-keyword">value</span>)
</code></pre>
<h3 id="update-online-privacy">Update Online Privacy</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> <span class="hljs-keyword">value</span> = <span class="hljs-string">'all'</span> <span class="hljs-comment">// 'match_last_seen'</span>
<span class="hljs-keyword">await</span> sock.updateOnlinePrivacy(<span class="hljs-keyword">value</span>)
</code></pre>
<h3 id="update-profile-picture-privacy">Update Profile Picture Privacy</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> <span class="hljs-keyword">value</span> = <span class="hljs-string">'all'</span> <span class="hljs-comment">// 'contacts' | 'contact_blacklist' | 'none'</span>
<span class="hljs-keyword">await</span> sock.updateProfilePicturePrivacy(<span class="hljs-keyword">value</span>)
</code></pre>
<h3 id="update-status-privacy">Update Status Privacy</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> <span class="hljs-keyword">value</span> = <span class="hljs-string">'all'</span> <span class="hljs-comment">// 'contacts' | 'contact_blacklist' | 'none'</span>
<span class="hljs-keyword">await</span> sock.updateStatusPrivacy(<span class="hljs-keyword">value</span>)
</code></pre>
<h3 id="update-read-receipts-privacy">Update Read Receipts Privacy</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> <span class="hljs-keyword">value</span> = <span class="hljs-string">'all'</span> <span class="hljs-comment">// 'none'</span>
<span class="hljs-keyword">await</span> sock.updateReadReceiptsPrivacy(<span class="hljs-keyword">value</span>)
</code></pre>
<h3 id="update-groups-add-privacy">Update Groups Add Privacy</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> <span class="hljs-keyword">value</span> = <span class="hljs-string">'all'</span> <span class="hljs-comment">// 'contacts' | 'contact_blacklist'</span>
<span class="hljs-keyword">await</span> sock.updateGroupsAddPrivacy(<span class="hljs-keyword">value</span>)
</code></pre>
<h3 id="update-default-disappearing-mode">Update Default Disappearing Mode</h3>
<ul>
<li>Like <a href="#disappearing-messages">this</a>, ephemeral can be:</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Seconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>Remove</td>
<td>0</td>
</tr>
<tr>
<td>24h</td>
<td>86.400</td>
</tr>
<tr>
<td>7d</td>
<td>604.800</td>
</tr>
<tr>
<td>90d</td>
<td>7.776.000</td>
</tr>
</tbody>
</table>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> ephemeral = <span class="hljs-number">86400</span>
<span class="hljs-keyword">await</span> sock.updateDefaultDisappearingMode(ephemeral)
</code></pre>
<h2 id="broadcast-lists-stories">Broadcast Lists &amp; Stories</h2>
<h3 id="send-broadcast-stories">Send Broadcast &amp; Stories</h3>
<ul>
<li>Messages can be sent to broadcasts &amp; stories. You need to add the following message options in sendMessage, like this:<pre><code class="lang-javascript"><span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">sock</span><span class="hljs-selector-class">.sendMessage</span>(
  <span class="hljs-selector-tag">jid</span>,
  {
      <span class="hljs-attribute">image</span>: {
          url: url
      },
      <span class="hljs-selector-tag">caption</span>: <span class="hljs-selector-tag">caption</span>
  },
  {
      <span class="hljs-attribute">backgroundColor</span>: backgroundColor,
      font: font,
      statusJidList: statusJidList,
      broadcast: true
  }
)
</code></pre>
</li>
<li>Message body can be a <code>extendedTextMessage</code> or <code>imageMessage</code> or <code>videoMessage</code> or <code>voiceMessage</code>, see <a href="https://baileys.whiskeysockets.io/types/AnyRegularMessageContent.html">here</a></li>
<li>You can add <code>backgroundColor</code> and other options in the message options, see <a href="https://baileys.whiskeysockets.io/types/MiscMessageGenerationOptions.html">here</a></li>
<li><code>broadcast: true</code> enables broadcast mode</li>
<li><p><code>statusJidList</code>: a list of people that you can get which you need to provide, which are the people who will get this status message.</p>
</li>
<li><p>You can send messages to broadcast lists the same way you send messages to groups &amp; individual chats.</p>
</li>
<li>Right now, WA Web does not support creating broadcast lists, but you can still delete them.</li>
<li>Broadcast IDs are in the format <code>12345678@broadcast</code><h3 id="query-a-broadcast-list-s-recipients-name">Query a Broadcast List&#39;s Recipients &amp; Name</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> bList = <span class="hljs-keyword">await</span> sock.getBroadcastListInfo(<span class="hljs-string">'1234@broadcast'</span>)
<span class="hljs-built_in">console</span>.log (<span class="hljs-string">`list name: <span class="hljs-subst">${bList.name}</span>, recps: <span class="hljs-subst">${bList.recipients}</span>`</span>)
</code></pre>
</li>
</ul>
<h2 id="writing-custom-functionality">Writing Custom Functionality</h2>
<p>Baileys is written with custom functionality in mind. Instead of forking the project &amp; re-writing the internals, you can simply write your own extensions.</p>
<h3 id="enabling-debug-level-in-baileys-logs">Enabling Debug Level in Baileys Logs</h3>
<p>First, enable the logging of unhandled messages from WhatsApp by setting:</p>
<pre><code class="lang-javascript">const sock = makeWASocket({
    logger: P({ level: &#39;debug&#39; }),
})
</code></pre>
<p>This will enable you to see all sorts of messages WhatsApp sends in the console.</p>
<h3 id="how-whatsapp-communicate-with-us">How Whatsapp Communicate With Us</h3>
<blockquote>
<p>[!TIP]
If you want to learn whatsapp protocol, we recommend to study about Libsignal Protocol and Noise Protocol</p>
</blockquote>
<ul>
<li><strong>Example:</strong> Functionality to track the battery percentage of your phone. You enable logging and you&#39;ll see a message about your battery pop up in the console:<pre><code>  {
      <span class="hljs-attr">"level"</span>: <span class="hljs-number">10</span>,
      <span class="hljs-attr">"fromMe"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"frame"</span>: {
          <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"ib"</span>,
          <span class="hljs-attr">"attrs"</span>: {
              <span class="hljs-attr">"from"</span>: <span class="hljs-string">"@s.whatsapp.net"</span>
          },
          <span class="hljs-attr">"content"</span>: [
              {
                  <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"edge_routing"</span>,
                  <span class="hljs-attr">"attrs"</span>: {},
                  <span class="hljs-attr">"content"</span>: [
                      {
                          <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"routing_info"</span>,
                          <span class="hljs-attr">"attrs"</span>: {},
                          <span class="hljs-attr">"content"</span>: {
                              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Buffer"</span>,
                              <span class="hljs-attr">"data"</span>: [<span class="hljs-number">8</span>,<span class="hljs-number">2</span>,<span class="hljs-number">8</span>,<span class="hljs-number">5</span>]
                          }
                      }
                  ]
              }
          ]
      },
      <span class="hljs-attr">"msg"</span>:<span class="hljs-string">"communication"</span>
  }
</code></pre></li>
</ul>
<p>The <code>&#39;frame&#39;</code> is what the message received is, it has three components:</p>
<ul>
<li><code>tag</code> -- what this frame is about (eg. message will have &#39;message&#39;)</li>
<li><code>attrs</code> -- a string key-value pair with some metadata (contains ID of the message usually)</li>
<li><code>content</code> -- the actual data (eg. a message node will have the actual message content in it)</li>
<li>read more about this format <a href="/src/WABinary/readme.md">here</a></li>
</ul>
<h3 id="register-a-callback-for-websocket-events">Register a Callback for Websocket Events</h3>
<blockquote>
<p>[!TIP]
Recommended to see <code>onMessageReceived</code> function in <code>socket.ts</code> file to understand how websockets events are fired</p>
</blockquote>
<pre><code class="lang-javascript">// for any message with <span class="hljs-keyword">tag</span> <span class="hljs-title">'edge_routing</span>'
sock.ws.on('CB:edge_routing', (<span class="hljs-keyword">node</span><span class="hljs-title">: BinaryNode</span>) =&gt; { })

// for any message with <span class="hljs-keyword">tag</span> <span class="hljs-title">'edge_routing</span>' <span class="hljs-keyword">and</span> id <span class="hljs-keyword">attribute</span> = abcd
sock.ws.on('CB:edge_routing,id:abcd', (<span class="hljs-keyword">node</span><span class="hljs-title">: BinaryNode</span>) =&gt; { })

// for any message with <span class="hljs-keyword">tag</span> <span class="hljs-title">'edge_routing</span>', id <span class="hljs-keyword">attribute</span> = abcd &amp; first content <span class="hljs-keyword">node</span> <span class="hljs-title">routing_info</span>
sock.ws.on('CB:edge_routing,id:abcd,routing_<span class="hljs-literal">inf</span>o', (<span class="hljs-keyword">node</span><span class="hljs-title">: BinaryNode</span>) =&gt; { })
</code></pre>
<blockquote>
<p>[!NOTE]
Also, this repo is now licenced under GPL 3 since it uses <a href="https://git.questbook.io/backend/service-coderunner/-/merge_requests/1">libsignal-node</a></p>
</blockquote>
<h3 id="note">NOTE</h3>
<p>This library is a modified version of <a href="https://www.npmjs.com/package/@fizzxydev/baileys-pro"><code>@fizzxydev/baileys-pro</code></a>, with the addition of certain features and bug fixes.</p>
</body></html>